<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Curly spoon</title><meta name="description" content=""><meta name="author" content="Quinten Clause"><meta name="monetization" content="$ilp.uphold.com/N3GyWXpENLq4"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"></head><body style="background:#000;color:#fff;margin:0;"> <canvas id="canvas" style="display:block;touch-action:none;user-select:none;-webkit-tap-highlight-color:transparent;"></canvas> <script type="module">var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequire5b25;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,i.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire5b25=i);var a=Object.freeze({addIcons:e=>{let t=document.createElement("canvas");t.width=1024,t.height=1024;let n=t.getContext("2d");n.fillStyle="white",n.fillRect(0,0,1024,1024),n.fillStyle="lightblue",n.fillRect(256,256,512,512);let i=t.toDataURL(),a=document.createElement("link");a.rel="icon",a.type="image/png",a.href=i,document.head.appendChild(a);let r=document.createElement("link");r.rel="apple-touch-icon",r.href=i,document.head.appendChild(r);let o=document.title,c=document.title,l=document.querySelector("[name=description]").getAttribute("content"),s=document.body.style.background,d=document.createElement("meta");d.name="theme-color",d.content=s,document.head.appendChild(d);let p=s,u=window.location.href,m=u.replace(/[^/]+$/,""),f=[{src:i,type:"image/png",sizes:"1024x1024"}],h=document.createElement("link");h.rel="manifest",h.href="data:application/json,"+JSON.stringify({name:o,short_name:c,description:l,background_color:p,theme_color:s,display:"standalone",start_url:u,scope:m,icons:f}),document.head.appendChild(h)}}),r={system:{states:["game","level"]},game:{state:{entities:["viewport","input"]}},viewport:{resize:{width:300,height:150,minWidth:288,minHeight:288}},input:{pointer:{}},map:{grid:{width:6,tileSize:48,nodes:[0,0,0,0,0,0,0,1,0,0,1,0,0,1,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0]}},level:{state:{entities:["map"]}}};let o={},c=document.title+" Data ";var l=Object.freeze({preupdate:e=>{let{id:t,entity:n}=e;if(void 0===o[t]){let e=localStorage.getItem(c+t);null!==e&&(o[t]=e,n.data=JSON.parse(e))}},postupdate:e=>{let{id:t,entity:n}=e,i=JSON.stringify(n.data);o[t]!==i&&(o[t]=i,localStorage.setItem(c+t,i))}});let s,d,p,u,m,f,h,g=0,v=(e=138)=>{if(void 0===s||"running"!==s.state){if(s=new AudioContext,/(iPhone|iPad)/i.test(navigator.userAgent)&&48e3!==s.sampleRate){let e=s.createBuffer(1,1,48e3),t=s.createBufferSource();t.buffer=e,t.connect(s.destination),t.start(0),t.disconnect(),s.close(),s=new AudioContext}p=s.createBiquadFilter(),p.connect(s.destination),p.type="lowpass",p.frequency.value=920,u=s.createGain(),u.connect(p),u.gain.value=.8,m=s.createDelay(60/e),m.delayTime.value=60/e,f=s.createGain(),f.gain.value=.25,m.connect(f),f.connect(m),h=s.createGain(),h.gain.value=.5,h.connect(u),m.connect(h),d=[0,1,2,3,4,5,6,7].map((()=>{let e=s.createGain();return e.connect(u),e.connect(m),e}))}},y=(e,t,n,i=120,a="triangle")=>{if("closed"===e.context.state)return;let r=t.split("+"),o=r[0].replace(/\d/g,""),c=r.reduce(((e,t)=>e+1/Number(t.match(/^\d+/g)[0])*240/i),0),l=r[0].match(/\d+$/g);l=l?+l[0]:4;let s="AbBCdDeEFgGa".indexOf(o);if(-1===s)return c;let d=100*s+1200*(l-4),p=e.context.createOscillator();return p.connect(e),p.frequency.value=440,p.detune.value=d,p.type=a,e.gain.setValueAtTime(0,n),e.gain.linearRampToValueAtTime(.6,n+.03*c),e.gain.setValueAtTime(.56,n+.24*c),e.gain.setValueAtTime(.55,n+.3*c),e.gain.linearRampToValueAtTime(0,n+1.5*c),p.start(n),p.stop(n+1.5*c),c};var w=Object.freeze({preupdate:e=>{let{component:t}=e;if(!t.play)return;let{melody:n,bpm:i=120,loop:a=!1,nextNote:r=0,nextNoteTick:o=s.currentTime}=t;v(i);let c=60/i*7;for(s.currentTime>o+.35&&(r=0,o=s.currentTime);o<s.currentTime+c;){let e=y(d[g],n[r],o,i);if(g=(g+1)%d.length,r=(r+1)%n.length,o+=e,0===r&&!a){t.play=!1;break}}t.nextNote=r,t.nextNoteTick=o},initCtx:v});let x=!1,b=!1;var E=Object.freeze({preupdate:e=>{!1===b&&((e=>{let t,n,i,a,r=e.component,o=e.entities.viewport.resize,c=!1,l=0,s=0,d=e=>{t=canvas.getBoundingClientRect(),n=t.left,i=t.top,a=o.zoom/window.devicePixelRatio,l=(e.clientX-n)/a,s=(e.clientY-i)/a,r.x=l,r.y=s};canvas.addEventListener("pointerdown",(e=>{!1!==e.isPrimary&&(d(e),r.downX=l,r.downY=s,r.justDown=!0,r.isDown=!0,c=!1,w.initCtx())})),canvas.addEventListener("pointermove",(e=>{!1!==e.isPrimary&&d(e)})),canvas.addEventListener("pointerup",(e=>{c?c=!1:!1!==e.isPrimary&&(d(e),r.justUp=!0,r.isDown=!1)})),canvas.addEventListener("pointerout",(e=>{r.isDown&&(r.justUp=!0,r.isDown=!1)})),canvas.addEventListener("pointerenter",(e=>{c=!0}))})(e),b=!0);let{component:t}=e;x=t.pointing,t.pointing=!1},postupdate:e=>{let{component:t}=e;t.justDown=!1,t.justUp=!1,x&&!t.pointing?canvas.style.cursor="default":!x&&t.pointing&&(canvas.style.cursor="pointer")}});let j=0,O=0,T=1,R=1,z=1,k=e=>{let{ctx:t}=e;t.restore(),t.save(),t.scale(z,z)};var C=Object.freeze({preupdate:e=>{if(j===window.innerWidth&&O===window.innerHeight)return;j=window.innerWidth,O=window.innerHeight,canvas.style.width=j+"px",canvas.style.height=O+"px",canvas.width=j*window.devicePixelRatio,canvas.height=O*window.devicePixelRatio;let{component:t}=e;t.width=j,t.height=O,T=t.minWidth/t.minHeight,R=j/O,z=T<R?canvas.height/t.minHeight:canvas.width/t.minWidth,t.zoom=z},draw:e=>{let{ctx:t}=e;k(e),t.clearRect(0,0,j,O)},flush:k});var S=Object.freeze({draw:e=>{let{ctx:t}=e,{x:n,y:i,width:a,height:r,fill:o}=e.component;t.fillStyle=o,t.fillRect(n,i,a,r)},update:e=>{let{pointer:t}=e.entities.input,{component:n,entity:i}=e,{x:a,y:r,width:o,height:c}=n;t.x<a||t.x>o+a||t.y<r||t.y>c+r||(t.pointing=!0,t.justUp&&void 0!==i.sound&&(i.sound.play=!0),t.justUp&&(void 0!==i.data&&void 0!==i.data.nClicks&&(i.data.nClicks=i.data.nClicks+1),e.entities.system.states=n.next))}});var D=Object.freeze({draw:e=>{let{ctx:t}=e,{nodes:n,width:i,tileSize:a}=e.component;t.fillStyle="#fff",n.forEach(((e,n)=>{let r=n%i,o=n/i|0;1===e?t.fillRect(r*a,o*a,a,a):t.fillRect((r+.4375)*a,(o+.4375)*a,a/8,a/8)}))},update:e=>{}}),A=Object.freeze({data:l,pointer:E,resize:C,sound:w,fillrect:S,grid:D});let N={},U=["preupdate","update","postupdate","draw"];U.forEach((e=>{N[e]={}})),Object.keys(A).forEach((e=>{U.forEach((t=>{void 0!==A[e][t]&&(N[t][e]=A[e][t])}))}));var L=Object.freeze({systems:N,systemTypes:U});a.addIcons();var P;i.register("45FFh",(function(e,t){var n,i,a,r,o;n=e.exports,i="getBundleURL",a=()=>o,r=e=>o=e,Object.defineProperty(n,i,{get:a,set:r,enumerable:!0,configurable:!0});var c={};function l(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(e){var t=c[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return l(e[2])}return"/"}(),c[e]=t),t}})),P=i("45FFh").getBundleURL("cmSNU")+"sw.js";try{"serviceWorker"in navigator&&window.addEventListener("load",(e=>{navigator.serviceWorker.register(P)}))}catch(e){}let{systems:F,systemTypes:q}=L,B={},W=canvas.getContext("2d"),_=0,G=0,H=e=>{G=e-_,_=e,q.forEach((e=>{B[e]=[]})),r.system.states.forEach((t=>{r[t].state.entities.forEach((n=>{let i=r[n];Object.keys(i).forEach((a=>{let o=i[a];q.forEach((c=>{void 0!==F[c][a]&&B[c].push({system:F[c][a],c:{entities:r,id:n,entity:i,comp:a,component:o,stateId:t,delta:G,time:e,ctx:W}})}))}))}))})),q.forEach((e=>{B[e].forEach((e=>{let{system:t,c:n}=e;t(n)}))})),requestAnimationFrame(H)};H(0);</script> </body></html>