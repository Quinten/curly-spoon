<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Curly spoon</title><meta name="description" content=""><meta name="author" content="Quinten Clause"><meta name="monetization" content="$ilp.uphold.com/N3GyWXpENLq4"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"></head><body style="background:#000;color:#fff;margin:0;"> <canvas id="canvas" style="display:block;touch-action:none;user-select:none;-webkit-tap-highlight-color:transparent;"></canvas> <script type="module">var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},i={},n=e.parcelRequire5b25;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in i){var n=i[e];delete i[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},e.parcelRequire5b25=n);var a=Object.freeze({addIcons:e=>{let t=document.createElement("canvas");t.width=1024,t.height=1024;let i=t.getContext("2d");i.fillStyle="white",i.fillRect(0,0,1024,1024),i.fillStyle="lightblue",i.fillRect(256,256,512,512);let n=t.toDataURL(),a=document.createElement("link");a.rel="icon",a.type="image/png",a.href=n,document.head.appendChild(a);let r=document.createElement("link");r.rel="apple-touch-icon",r.href=n,document.head.appendChild(r);let o=document.title,l=document.title,c=document.querySelector("[name=description]").getAttribute("content"),d=document.body.style.background,s=document.createElement("meta");s.name="theme-color",s.content=d,document.head.appendChild(s);let p=d,u=window.location.href,m=u.replace(/[^/]+$/,""),f=[{src:n,type:"image/png",sizes:"1024x1024"}],h=document.createElement("link");h.rel="manifest",h.href="data:application/json,"+JSON.stringify({name:o,short_name:l,description:c,background_color:p,theme_color:d,display:"standalone",start_url:u,scope:m,icons:f}),document.head.appendChild(h)}}),r={system:{states:["game","level"]},game:{state:{entities:["viewport","input"]}},viewport:{resize:{minWidth:288,minHeight:288}},input:{pointer:{}},map:{grid:{width:6,tileSize:48,nodes:[0,0,0,0,0,0,0,1,0,0,1,0,0,1,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0]}},spoon:{pathfinder:{grid:"map",startNode:30}},level:{state:{entities:["map","spoon"]}}};let o={},l=document.title+" Data ";var c=Object.freeze({preupdate:e=>{let{id:t,entity:i}=e;if(void 0===o[t]){let e=localStorage.getItem(l+t);null!==e&&(o[t]=e,i.data=JSON.parse(e))}},postupdate:e=>{let{id:t,entity:i}=e,n=JSON.stringify(i.data);o[t]!==n&&(o[t]=n,localStorage.setItem(l+t,n))}});let d,s,p,u,m,f,h,g=0,v=(e=138)=>{if(void 0===d||"running"!==d.state){if(d=new AudioContext,/(iPhone|iPad)/i.test(navigator.userAgent)&&48e3!==d.sampleRate){let e=d.createBuffer(1,1,48e3),t=d.createBufferSource();t.buffer=e,t.connect(d.destination),t.start(0),t.disconnect(),d.close(),d=new AudioContext}p=d.createBiquadFilter(),p.connect(d.destination),p.type="lowpass",p.frequency.value=920,u=d.createGain(),u.connect(p),u.gain.value=.8,m=d.createDelay(60/e),m.delayTime.value=60/e,f=d.createGain(),f.gain.value=.25,m.connect(f),f.connect(m),h=d.createGain(),h.gain.value=.5,h.connect(u),m.connect(h),s=[0,1,2,3,4,5,6,7].map((()=>{let e=d.createGain();return e.connect(u),e.connect(m),e}))}},w=(e,t,i,n=120,a="triangle")=>{if("closed"===e.context.state)return;let r=t.split("+"),o=r[0].replace(/\d/g,""),l=r.reduce(((e,t)=>e+1/Number(t.match(/^\d+/g)[0])*240/n),0),c=r[0].match(/\d+$/g);c=c?+c[0]:4;let d="AbBCdDeEFgGa".indexOf(o);if(-1===d)return l;let s=100*d+1200*(c-4),p=e.context.createOscillator();return p.connect(e),p.frequency.value=440,p.detune.value=s,p.type=a,e.gain.setValueAtTime(0,i),e.gain.linearRampToValueAtTime(.6,i+.03*l),e.gain.setValueAtTime(.56,i+.24*l),e.gain.setValueAtTime(.55,i+.3*l),e.gain.linearRampToValueAtTime(0,i+1.5*l),p.start(i),p.stop(i+1.5*l),l};var y=Object.freeze({preupdate:e=>{let{component:t}=e;if(!t.play)return;let{melody:i,bpm:n=120,loop:a=!1,nextNote:r=0,nextNoteTick:o=d.currentTime}=t;v(n);let l=60/n*7;for(d.currentTime>o+.35&&(r=0,o=d.currentTime);o<d.currentTime+l;){let e=w(s[g],i[r],o,n);if(g=(g+1)%s.length,r=(r+1)%i.length,o+=e,0===r&&!a){t.play=!1;break}}t.nextNote=r,t.nextNoteTick=o},initCtx:v});let x=!1,z=!1;var b=Object.freeze({preupdate:e=>{!1===z&&((e=>{let t,i,n,a,r=e.component,o=e.entities.viewport.resize,l=!1,c=0,d=0,s=e=>{t=canvas.getBoundingClientRect(),i=t.left,n=t.top,a=o.zoom/window.devicePixelRatio,c=(e.clientX-i)/a,d=(e.clientY-n)/a,r.x=c,r.y=d};canvas.addEventListener("pointerdown",(e=>{!1!==e.isPrimary&&(s(e),r.downX=c,r.downY=d,r.justDown=!0,r.isDown=!0,l=!1,y.initCtx())})),canvas.addEventListener("pointermove",(e=>{!1!==e.isPrimary&&s(e)})),canvas.addEventListener("pointerup",(e=>{l?l=!1:!1!==e.isPrimary&&(s(e),r.justUp=!0,r.isDown=!1)})),canvas.addEventListener("pointerout",(e=>{r.isDown&&(r.justUp=!0,r.isDown=!1)})),canvas.addEventListener("pointerenter",(e=>{l=!0}))})(e),z=!0);let{component:t}=e;x=t.pointing,t.pointing=!1},postupdate:e=>{let{component:t}=e;t.justDown=!1,t.justUp=!1,x&&!t.pointing?canvas.style.cursor="default":!x&&t.pointing&&(canvas.style.cursor="pointer")}});let S=0,E=0,j=1,O=1,R=1,T=e=>{let{ctx:t}=e;t.restore(),t.save(),t.scale(R,R)};var N=Object.freeze({preupdate:e=>{if(S===window.innerWidth&&E===window.innerHeight)return;S=window.innerWidth,E=window.innerHeight,canvas.style.width=S+"px",canvas.style.height=E+"px",canvas.width=S*window.devicePixelRatio,canvas.height=E*window.devicePixelRatio;let{component:t}=e;j=t.minWidth/t.minHeight,O=S/E,j<O?(R=canvas.height/t.minHeight,t.width=t.minWidth*O,t.height=t.minHeight):(R=canvas.width/t.minWidth,t.width=t.minWidth,t.height=t.minHeight/O),t.zoom=R},draw:e=>{let{ctx:t}=e;T(e),t.clearRect(0,0,S,E)},flush:T});var k=Object.freeze({draw:e=>{let{ctx:t}=e,{x:i,y:n,width:a,height:r,fill:o}=e.component;t.fillStyle=o,t.fillRect(i,n,a,r)},update:e=>{let{pointer:t}=e.entities.input,{component:i,entity:n}=e,{x:a,y:r,width:o,height:l}=i;t.x<a||t.x>o+a||t.y<r||t.y>l+r||(t.pointing=!0,t.justUp&&void 0!==n.sound&&(n.sound.play=!0),t.justUp&&(void 0!==n.data&&void 0!==n.data.nClicks&&(n.data.nClicks=n.data.nClicks+1),e.entities.system.states=i.next))}});var C=Object.freeze({draw:e=>{let{ctx:t}=e,{nodes:i,width:n,tileSize:a}=e.component;t.fillStyle="#fff";let r=(e.entities.viewport.resize.width-e.entities.viewport.resize.minWidth)/2,o=(e.entities.viewport.resize.height-e.entities.viewport.resize.minHeight)/2;e.component.x=r,e.component.y=o,i.forEach(((e,i)=>{let l=i%n,c=i/n|0;1===e?t.fillRect(r+l*a,o+c*a,a,a):t.fillRect(r+(l+.4375)*a,o+(c+.4375)*a,a/8,a/8)}))}});var D=Object.freeze({update:e=>{let{pointer:t}=e.entities.input;if(!t.justUp)return;let{component:i,entities:n}=e,a=n[i.grid].grid,r=Math.floor((t.x-a.x)/a.tileSize),o=Math.floor((t.y-a.y)/a.tileSize),l=a.width,c=a.nodes.length/a.width|0;if(r<0||r>=l||o<0||o>=c)return;let d=r+o*a.width;0===a.nodes[d]&&(i.endNode=d)},draw:e=>{let{component:t,entities:i,ctx:n}=e;void 0!==t.endNode&&(t.startNode=t.endNode);let a=i[t.grid].grid,r=a.x+t.startNode%a.width*a.tileSize,o=a.y+(t.startNode/a.width|0)*a.tileSize;n.fillStyle="#fff",n.fillRect(r+.375*a.tileSize,o+.375*a.tileSize,a.tileSize/4,a.tileSize/4),n.fillStyle="#000",n.fillRect(r+.4375*a.tileSize,o+.4375*a.tileSize,a.tileSize/8,a.tileSize/8)}}),U=Object.freeze({data:c,pointer:b,resize:N,sound:y,fillrect:k,grid:C,pathfinder:D});let A={},L=["preupdate","update","postupdate","draw"];L.forEach((e=>{A[e]={}})),Object.keys(U).forEach((e=>{L.forEach((t=>{void 0!==U[e][t]&&(A[t][e]=U[e][t])}))}));var W=Object.freeze({systems:A,systemTypes:L});a.addIcons();var P;n.register("45FFh",(function(e,t){var i,n,a,r,o;i=e.exports,n="getBundleURL",a=()=>o,r=e=>o=e,Object.defineProperty(i,n,{get:a,set:r,enumerable:!0,configurable:!0});var l={};function c(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(e){var t=l[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return c(e[2])}return"/"}(),l[e]=t),t}})),P=n("45FFh").getBundleURL("cmSNU")+"sw.js";try{"serviceWorker"in navigator&&window.addEventListener("load",(e=>{navigator.serviceWorker.register(P)}))}catch(e){}let{systems:F,systemTypes:H}=W,q={},B=canvas.getContext("2d"),_=0,G=0,I=e=>{G=e-_,_=e,H.forEach((e=>{q[e]=[]})),r.system.states.forEach((t=>{r[t].state.entities.forEach((i=>{let n=r[i];Object.keys(n).forEach((a=>{let o=n[a];H.forEach((l=>{void 0!==F[l][a]&&q[l].push({system:F[l][a],c:{entities:r,id:i,entity:n,comp:a,component:o,stateId:t,delta:G,time:e,ctx:B}})}))}))}))})),H.forEach((e=>{q[e].forEach((e=>{let{system:t,c:i}=e;t(i)}))})),requestAnimationFrame(I)};I(0);</script> </body></html>