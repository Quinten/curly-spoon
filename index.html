<!doctype html><html lang="en"><head><meta charset="utf-8"><title>Curly spoon</title><meta name="description" content=""><meta name="author" content="Quinten Clause"><meta name="monetization" content="$ilp.uphold.com/N3GyWXpENLq4"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"></head><body style="background:#000;color:#fff;margin:0;"> <canvas id="canvas" style="display:block;touch-action:none;user-select:none;-webkit-tap-highlight-color:transparent;"></canvas> <script type="module">var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequire5b25;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var a={id:e,exports:{}};return t[e]=a,i.call(a.exports,a,a.exports),a.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){n[e]=t},e.parcelRequire5b25=i);var a=Object.freeze({addIcons:e=>{let t=document.createElement("canvas");t.width=1024,t.height=1024;let n=t.getContext("2d");n.fillStyle="white",n.fillRect(0,0,1024,1024),n.fillStyle="lightblue",n.fillRect(256,256,512,512);let i=t.toDataURL(),a=document.createElement("link");a.rel="icon",a.type="image/png",a.href=i,document.head.appendChild(a);let r=document.createElement("link");r.rel="apple-touch-icon",r.href=i,document.head.appendChild(r);let o=document.title,l=document.title,c=document.querySelector("[name=description]").getAttribute("content"),s=document.body.style.background,d=document.createElement("meta");d.name="theme-color",d.content=s,document.head.appendChild(d);let p=s,u=window.location.href,m=u.replace(/[^/]+$/,""),h=[{src:i,type:"image/png",sizes:"1024x1024"}],f=document.createElement("link");f.rel="manifest",f.href="data:application/json,"+JSON.stringify({name:o,short_name:l,description:c,background_color:p,theme_color:s,display:"standalone",start_url:u,scope:m,icons:h}),document.head.appendChild(f)}}),r={system:{states:["game","level"]},game:{state:{entities:["viewport","input"]}},viewport:{resize:{minWidth:288,minHeight:288}},input:{pointer:{}},map:{grid:{width:6,tileSize:48,nodes:[0,0,0,0,0,0,0,1,0,0,1,0,0,1,1,0,1,0,0,0,1,0,0,0,0,0,1,0,1,1,0,0,0,0,0,0]}},spoon:{pathfinder:{grid:"map"}},level:{state:{entities:["map","spoon"]}}};let o={},l=document.title+" Data ";var c=Object.freeze({preupdate:e=>{let{id:t,entity:n}=e;if(void 0===o[t]){let e=localStorage.getItem(l+t);null!==e&&(o[t]=e,n.data=JSON.parse(e))}},postupdate:e=>{let{id:t,entity:n}=e,i=JSON.stringify(n.data);o[t]!==i&&(o[t]=i,localStorage.setItem(l+t,i))}});let s,d,p,u,m,h,f,g=0,v=(e=138)=>{if(void 0===s||"running"!==s.state){if(s=new AudioContext,/(iPhone|iPad)/i.test(navigator.userAgent)&&48e3!==s.sampleRate){let e=s.createBuffer(1,1,48e3),t=s.createBufferSource();t.buffer=e,t.connect(s.destination),t.start(0),t.disconnect(),s.close(),s=new AudioContext}p=s.createBiquadFilter(),p.connect(s.destination),p.type="lowpass",p.frequency.value=920,u=s.createGain(),u.connect(p),u.gain.value=.8,m=s.createDelay(60/e),m.delayTime.value=60/e,h=s.createGain(),h.gain.value=.25,m.connect(h),h.connect(m),f=s.createGain(),f.gain.value=.5,f.connect(u),m.connect(f),d=[0,1,2,3,4,5,6,7].map((()=>{let e=s.createGain();return e.connect(u),e.connect(m),e}))}},w=(e,t,n,i=120,a="triangle")=>{if("closed"===e.context.state)return;let r=t.split("+"),o=r[0].replace(/\d/g,""),l=r.reduce(((e,t)=>e+1/Number(t.match(/^\d+/g)[0])*240/i),0),c=r[0].match(/\d+$/g);c=c?+c[0]:4;let s="AbBCdDeEFgGa".indexOf(o);if(-1===s)return l;let d=100*s+1200*(c-4),p=e.context.createOscillator();return p.connect(e),p.frequency.value=440,p.detune.value=d,p.type=a,e.gain.setValueAtTime(0,n),e.gain.linearRampToValueAtTime(.6,n+.03*l),e.gain.setValueAtTime(.56,n+.24*l),e.gain.setValueAtTime(.55,n+.3*l),e.gain.linearRampToValueAtTime(0,n+1.5*l),p.start(n),p.stop(n+1.5*l),l};var y=Object.freeze({preupdate:e=>{let{component:t}=e;if(!t.play)return;let{melody:n,bpm:i=120,loop:a=!1,nextNote:r=0,nextNoteTick:o=s.currentTime}=t;v(i);let l=60/i*7;for(s.currentTime>o+.35&&(r=0,o=s.currentTime);o<s.currentTime+l;){let e=w(d[g],n[r],o,i);if(g=(g+1)%d.length,r=(r+1)%n.length,o+=e,0===r&&!a){t.play=!1;break}}t.nextNote=r,t.nextNoteTick=o},initCtx:v});let x=!1,b=!1;var E=Object.freeze({preupdate:e=>{!1===b&&((e=>{let t,n,i,a,r=e.component,o=e.entities.viewport.resize,l=!1,c=0,s=0,d=e=>{t=canvas.getBoundingClientRect(),n=t.left,i=t.top,a=o.zoom/window.devicePixelRatio,c=(e.clientX-n)/a,s=(e.clientY-i)/a,r.x=c,r.y=s};canvas.addEventListener("pointerdown",(e=>{!1!==e.isPrimary&&(d(e),r.downX=c,r.downY=s,r.justDown=!0,r.isDown=!0,l=!1,y.initCtx())})),canvas.addEventListener("pointermove",(e=>{!1!==e.isPrimary&&d(e)})),canvas.addEventListener("pointerup",(e=>{l?l=!1:!1!==e.isPrimary&&(d(e),r.justUp=!0,r.isDown=!1)})),canvas.addEventListener("pointerout",(e=>{r.isDown&&(r.justUp=!0,r.isDown=!1)})),canvas.addEventListener("pointerenter",(e=>{l=!0}))})(e),b=!0);let{component:t}=e;x=t.pointing,t.pointing=!1},postupdate:e=>{let{component:t}=e;t.justDown=!1,t.justUp=!1,x&&!t.pointing?canvas.style.cursor="default":!x&&t.pointing&&(canvas.style.cursor="pointer")}});let z=0,j=0,O=1,T=1,R=1,k=e=>{let{ctx:t}=e;t.restore(),t.save(),t.scale(R,R)};var C=Object.freeze({preupdate:e=>{if(z===window.innerWidth&&j===window.innerHeight)return;z=window.innerWidth,j=window.innerHeight,canvas.style.width=z+"px",canvas.style.height=j+"px",canvas.width=z*window.devicePixelRatio,canvas.height=j*window.devicePixelRatio;let{component:t}=e;O=t.minWidth/t.minHeight,T=z/j,O<T?(R=canvas.height/t.minHeight,t.width=t.minWidth*T,t.height=t.minHeight):(R=canvas.width/t.minWidth,t.width=t.minWidth,t.height=t.minHeight/T),t.zoom=R},draw:e=>{let{ctx:t}=e;k(e),t.clearRect(0,0,z,j)},flush:k});var S=Object.freeze({draw:e=>{let{ctx:t}=e,{x:n,y:i,width:a,height:r,fill:o}=e.component;t.fillStyle=o,t.fillRect(n,i,a,r)},update:e=>{let{pointer:t}=e.entities.input,{component:n,entity:i}=e,{x:a,y:r,width:o,height:l}=n;t.x<a||t.x>o+a||t.y<r||t.y>l+r||(t.pointing=!0,t.justUp&&void 0!==i.sound&&(i.sound.play=!0),t.justUp&&(void 0!==i.data&&void 0!==i.data.nClicks&&(i.data.nClicks=i.data.nClicks+1),e.entities.system.states=n.next))}});var D=Object.freeze({draw:e=>{let{ctx:t}=e,{nodes:n,width:i,tileSize:a}=e.component;t.fillStyle="#fff";let r=(e.entities.viewport.resize.width-e.entities.viewport.resize.minWidth)/2,o=(e.entities.viewport.resize.height-e.entities.viewport.resize.minHeight)/2;e.component.x=r,e.component.y=o,n.forEach(((e,n)=>{let l=n%i,c=n/i|0;1===e?t.fillRect(r+l*a,o+c*a,a,a):t.fillRect(r+(l+.4375)*a,o+(c+.4375)*a,a/8,a/8)}))}});var U=Object.freeze({update:e=>{let{pointer:t}=e.entities.input;if(!t.justUp)return;let{component:n,entity:i}=e,a=e.entities[n.grid].grid,r=Math.floor((t.x-a.x)/a.tileSize),o=Math.floor((t.y-a.y)/a.tileSize),l=a.width,c=a.nodes.length/a.width|0;if(r<0||r>=l||o<0||o>=c)return;let s=r+o*a.width;console.log(a.nodes[s])}}),A=Object.freeze({data:c,pointer:E,resize:C,sound:y,fillrect:S,grid:D,pathfinder:U});let N={},L=["preupdate","update","postupdate","draw"];L.forEach((e=>{N[e]={}})),Object.keys(A).forEach((e=>{L.forEach((t=>{void 0!==A[e][t]&&(N[t][e]=A[e][t])}))}));var W=Object.freeze({systems:N,systemTypes:L});a.addIcons();var P;i.register("45FFh",(function(e,t){var n,i,a,r,o;n=e.exports,i="getBundleURL",a=()=>o,r=e=>o=e,Object.defineProperty(n,i,{get:a,set:r,enumerable:!0,configurable:!0});var l={};function c(e){return(""+e).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(e){var t=l[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return c(e[2])}return"/"}(),l[e]=t),t}})),P=i("45FFh").getBundleURL("cmSNU")+"sw.js";try{"serviceWorker"in navigator&&window.addEventListener("load",(e=>{navigator.serviceWorker.register(P)}))}catch(e){}let{systems:F,systemTypes:H}=W,q={},B=canvas.getContext("2d"),_=0,G=0,I=e=>{G=e-_,_=e,H.forEach((e=>{q[e]=[]})),r.system.states.forEach((t=>{r[t].state.entities.forEach((n=>{let i=r[n];Object.keys(i).forEach((a=>{let o=i[a];H.forEach((l=>{void 0!==F[l][a]&&q[l].push({system:F[l][a],c:{entities:r,id:n,entity:i,comp:a,component:o,stateId:t,delta:G,time:e,ctx:B}})}))}))}))})),H.forEach((e=>{q[e].forEach((e=>{let{system:t,c:n}=e;t(n)}))})),requestAnimationFrame(I)};I(0);</script> </body></html>